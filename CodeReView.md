## CodeReView--代码评审(审查)
> 参考资料：https://baike.baidu.com/item/Code%20Review/8466134
> https://blog.csdn.net/powertoolsteam/article/details/81699365
> https://blog.csdn.net/messigodlike/article/details/78422833


[toc]

### 什么是ReView？

> 百度百科：代码评审是指在软件开发过程中，对源代码的系统性检查。通常的目的是查找系统缺陷，保证软件总体质量和提高开发者自身水平。 Code Review是轻量级代码评审，相对于正式代码评审，轻量级代码评审所需要的各种成本要明显低的多，如果流程正确，它可以起到更加积极的效果。正因如此，轻量级代码评审经常性得被引入到软件开发过程中。

### 为什么要进行Code ReView?
> 1、提高代码质量。  
> 2、能及早发现系统潜在的缺陷与BUG，降低上线后出事故的处理成本。  
> 3、促进团队内部知识共享，提高团队整体技术水平。   
> 4、评审过程对于评审人员来说，也是一种思路重构的过程。同时能帮助更多的人理解系统。  

### Code ReView的几种常见类型

#### 正式代码评审
> 正式的代码审查是基于正式的开发流程。其中最流行的实践是范根检查法(Fagan inspection)。 
 
> 范根检查法由6个步骤组成：计划(Planning)，概述(Overview)，准备(Preparation)，召开检查会议(Inspection Meeting)，重做(Rework)，追查(Follow-up)。基本的思想是：预先制定好每一个步骤所需要达到的输出要求。接下来，当进行到某个过程时，你检查其现在的输出，并与之前制定的理想输出要求做比较。然后，你由此来决定，是否进入下一个步骤，或者仍需在当前步骤继续工作。
 
#### 轻量级的代码评审

##### 瞬时的代码审查，也称为结对编程(pair programming)
> 当一个开发者在敲键盘写代码的同时，另一个开发者盯着代码，注意着代码中潜在的问题，并在此过程中给出提升代码质量的建议。

> **复杂的业务问题：**  

> 当你需要解决一个复杂问题时，这种代码审查的方法很适用。在仔细寻找解决方案的过程中，把两个人的脑力聚集起来，会增加成功的几率。让两个头脑思考同一个问题，并相互讨论可行的方案，这样你会更可能覆盖到问题的一些边界情况。

> **相同的专业水平：**  

> 考虑进行结对编程的另一个重要方面，是一起工作时，两个开发者的专业水平。两个开发者最好是处于同一水平，因为这样他们才能以相同的速度一起工作。  

> **总结**：  
> 结对编程适用于两个有相似经验水平的开发者处理复杂的业务问题的情况。


##### 同步的代码审查，也称为即时(over-the-shoulder)代码审查
> 一个开发者独自编写代码，当他写完代码后，立即找代码审查者进行审查。审查者来到开发者的桌前，看着同一块屏幕，一起审查、讨论和改进代码。

> **审查者不清楚代码的目标：**  

> 当审查者不清楚这个任务的目标时，这种代码审查类型会很有效果。它会在这种情况下发生：团队里没有优化会议(refinement sessions)，或者sprint计划会议(sprint planning sessions)，来预先讨论每一项任务。  
> 此做法通常会导致一个结果：只有特定的开发人员才知道某项任务的需求。  
> 这样的情况下，在代码审查之前，向审查者介绍一下任务的目标是很有帮助的。

> **期待大量的代码改进：**  

> 如果代码编写者缺乏经验，写出的代码需要很大的改进，那么同步代码审查也会很有效。

> 如果一个经验丰富的高级开发者将要对一个很初级的程序员写出的一段代码进行审查，那么，当初级程序员写完代码后就和高级开发者一起改进这段代码，效率是远远高于初级程序员自己一个人看的。

> **强行切换思路的缺点：**  

> 但是同步审查有一大缺点，就是它强行切换了审查者的思路。它不仅让审查者感到沮丧，也拖慢了整个团队的效率。

##### 异步的代码审查，也称为有工具支持的(tool-assisted)代码审查
> 这一类型的审查不是在同一时间、同一块屏幕上完成的，而是异步的。开发者在写完代码后，让这些代码对审查者可见，然后开始她的下一个任务。

> 当审查者有时间了，他会在自己的桌子上按自己的时间表进行代码审查。他而不需要当面和开发者沟通，而是用工具写一些评论。在完成审查后，那些工具会把评论和需要的改动通知给开发者。开发者就会根据评论改进代码，同样的，是以自己的时间表来做这些事情。

> **优点：**  
> 异步代码审查的一大好处， 就是它是异步发生的。开发者不需要直接依赖于审查者，并且他们都可以按自己的时间表去做各自的工作。

> **缺点：**  
> 可能会有许多次循环的审查，它们可能会持续好几天，直到最终被接受。

##### 偶尔的代码审查，也称为基于会议的(meeting-based)的代码审查
> 偶尔聚集开发者一起探讨审查代码。  
> 当整个团队都没有代码审查的经验时，让把每个人聚起来，一起做代码审查，这样弄几次之后，可能会帮助每个人理解代码审查的目标和意义。  
> 这种类型的代码审查并不是一个合适的方式，因为让全组成员一起审查一段代码是效率很低的做法。

### 哪些团队适合开展Code ReView?

> **1.技术驱动型团队：**  
> 一般涉及系统底层逻辑较多，功能路径难以被测试覆盖，而产品质量问题很多时候是致命的，所以这样的团队更多需要开发编码的严谨性和相关代码质量的保证活动。手机管家高权限应用组就属于这一类型。

> **2.公共服务型团队：**  
> 一般服务于多个团队，一旦出现质量问题影响范围会比较广，所以除了在测试方面加以把关外，通过CodeReview活动来提升开发质量是非常有必要的。

> **3.测试缺失型团队：**  
> 这样的团队由于缺乏测试环节，质量问题带到线上的风险会很高，强烈建议在开发环节做好自检工作。

> **4.新人密集型团队：**  
> 新人的代码可读性往往是比较差的，特别需要组织能及时给予纠正，帮助新人养成良好的编码习惯。同时如果团队产出的代码可读性较高时，新人也可以更快上手工作。

> **5.任何有主观意愿的团队：**  
> 这样的团队或领导者认同CodeReview的意义，或团队成员对代码质量提升有追求。

### 哪些团队不适合开展Code ReView?

> **1.不认同型团队：**  
> 即领导和团队骨干都不认同CodeReview意义的团队，这样的团队无论从推动还是坚持上都有很大挑战。

> **2.疲于应付型团队：**  
> 这种团队一般没有建立必要的持续提升机制，每天淹没在各种需求沟通实现变更和优化中，自然，代码质量提升活动也很难被列入backlog。

> **3.创新型团队：**  
> 这种团队的重要任务是要把产品快速推向市场进行价值验证，所以在代码编写上要求足够敏捷，代码暂时的混乱完全可以接受。



